#!/bin/bash

python3.6 run-logged-aws-playlist.py \
--mode benchmark \
--playlist-file $1 \
--aws-config-file /path/to/my/aws-config.json \
--loadgen-instance c5.9xlarge \
--gap-seconds 60 \
--repeat 1 \
--parallel 1 \
--filesystem xfs \
--tenancy default \
--threads-per-core 2 \
--tags sizing-medium-mirrored \
--version 3.8.4 \
--generic-unix-url https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.4/rabbitmq-server-generic-unix-latest-toolchain-3.8.4.tar.xz \
--vars-file .variables/rabbitmq-generic-vars-erl-23.yml \
--volume1-type $2 \
--volume1-size $3 \
--config-count 7 \
--config-tag1 c1 \
--instance1 c5.9xlarge \
--core-count1 18 \
--cluster-size1 3 \
--config-tag2 c2 \
--instance2 c5.4xlarge \
--core-count2 8 \
--cluster-size2 3 \
--config-tag3 c3 \
--instance3 c5.4xlarge \
--core-count3 8 \
--cluster-size3 5 \
--config-tag4 c4 \
--instance4 c5.4xlarge \
--core-count4 8 \
--cluster-size4 7 \
--config-tag5 c5 \
--instance5 c5.2xlarge \
--core-count5 4 \
--cluster-size5 5 \
--config-tag6 c6 \
--instance6 c5.2xlarge \
--core-count6 4 \
--cluster-size6 7 \
--config-tag7 c6 \
--instance7 c5.2xlarge \
--core-count7 4 \
--cluster-size7 9 \
--warm-up-seconds 60