{
  "topologyType": "SingleDimension",
  "benchmarkType": "{{ var.benchmarkType }}",
  "variables": [
    { "name": "benchmarkType", "default": "throughput" },
    { "name": "groupScale", "default": "1" },
    { "name": "scaleType", "default": "single-vhost" },
    { "name": "queuePrefix", "default": "q1" },
    { "name": "queueCount", "default": "1" },
    { "name": "hasDlx", "default": "false" },
    { "name": "publisherCount", "default": "1" },
    { "name": "consumerCount", "default": "1" },
    { "name": "deliveryMode", "default": "persistent" },
    { "name": "messageSize", "default": "20" },
    { "name": "publishRate", "default": "0"},
    { "name": "useConfirms", "default": "true" },
    { "name": "inflightLimit", "default": "1000" },
    { "name": "manualAcks", "default": "true" },
    { "name": "consumerPrefetch", "default": "1000" },
    { "name": "ackInterval", "default": "1" },
    { "name": "ackIntervalMs", "default": "1000" },
    { "name": "processingMs", "default": "0" },
    { "name": "queueMode", "default": "default" },
    { "name": "durationSeconds", "default": "120" },
    { "name": "initialPublish", "default": "0" },
    { "name": "dimension", "default": "PublishRate" },
    { "name": "stepLimit", "default": "100" },
    { "name": "value1", "default": "1" },
    { "name": "value2", "default": "2" },
    { "name": "value3", "default": "3" },
    { "name": "value4", "default": "4" },
    { "name": "value5", "default": "5" },
    { "name": "value6", "default": "6" },
    { "name": "value7", "default": "7" },
    { "name": "value8", "default": "8" },
    { "name": "value9", "default": "9" },
    { "name": "value10", "default": "10" },
    { "name": "value11", "default": "11" },
    { "name": "value12", "default": "12" },
    { "name": "value13", "default": "13" },
    { "name": "value14", "default": "14" },
    { "name": "value15", "default": "15" },
    { "name": "value16", "default": "16" },
    { "name": "value17", "default": "17" },
    { "name": "value18", "default": "18" },
    { "name": "value19", "default": "19" },
    { "name": "value20", "default": "20" },
    { "name": "value21", "default": "21" },
    { "name": "value22", "default": "22" },
    { "name": "value23", "default": "23" },
    { "name": "value24", "default": "24" },
    { "name": "value25", "default": "25" },
    { "name": "value26", "default": "26" },
    { "name": "value27", "default": "27" },
    { "name": "value28", "default": "28" },
    { "name": "value29", "default": "29" },
    { "name": "value30", "default": "30" },
    { "name": "value31", "default": "31" },
    { "name": "value32", "default": "32" },
    { "name": "value33", "default": "33" },
    { "name": "value34", "default": "34" },
    { "name": "value35", "default": "35" },
    { "name": "value36", "default": "36" },
    { "name": "value37", "default": "37" },
    { "name": "value38", "default": "38" },
    { "name": "value39", "default": "39" },
    { "name": "value40", "default": "40" },
    { "name": "value41", "default": "41" },
    { "name": "value42", "default": "42" },
    { "name": "value43", "default": "43" },
    { "name": "value44", "default": "44" },
    { "name": "value45", "default": "45" },
    { "name": "value46", "default": "46" },
    { "name": "value47", "default": "47" },
    { "name": "value48", "default": "48" },
    { "name": "value49", "default": "49" },
    { "name": "value50", "default": "50" },
    { "name": "value51", "default": "51" },
    { "name": "value52", "default": "52" },
    { "name": "value53", "default": "53" },
    { "name": "value54", "default": "54" },
    { "name": "value55", "default": "55" },
    { "name": "value56", "default": "56" },
    { "name": "value57", "default": "57" },
    { "name": "value58", "default": "58" },
    { "name": "value59", "default": "59" },
    { "name": "value50", "default": "50" },
    { "name": "value61", "default": "61" },
    { "name": "value62", "default": "62" },
    { "name": "value63", "default": "63" },
    { "name": "value64", "default": "64" },
    { "name": "value65", "default": "65" },
    { "name": "value66", "default": "66" },
    { "name": "value67", "default": "67" },
    { "name": "value68", "default": "68" },
    { "name": "value69", "default": "69" },
    { "name": "value70", "default": "70" },
    { "name": "value71", "default": "71" },
    { "name": "value72", "default": "72" },
    { "name": "value73", "default": "73" },
    { "name": "value74", "default": "74" },
    { "name": "value75", "default": "75" },
    { "name": "value76", "default": "76" },
    { "name": "value77", "default": "77" },
    { "name": "value78", "default": "78" },
    { "name": "value79", "default": "79" },
    { "name": "value80", "default": "80" },
    { "name": "value81", "default": "81" },
    { "name": "value82", "default": "82" },
    { "name": "value83", "default": "83" },
    { "name": "value84", "default": "84" },
    { "name": "value85", "default": "85" },
    { "name": "value86", "default": "86" },
    { "name": "value87", "default": "87" },
    { "name": "value88", "default": "88" },
    { "name": "value89", "default": "89" },
    { "name": "value90", "default": "90" },
    { "name": "value91", "default": "91" },
    { "name": "value92", "default": "92" },
    { "name": "value93", "default": "93" },
    { "name": "value94", "default": "94" },
    { "name": "value95", "default": "95" },
    { "name": "value96", "default": "96" },
    { "name": "value97", "default": "97" },
    { "name": "value98", "default": "98" },
    { "name": "value99", "default": "99" },
    { "name": "value100", "default": "100" }
  ],
  "topologyGroups": [
    {
      "name": "benchmark",
      "scale": "{{ var.groupScale }}",
      "scaleType": "{{ var.scaleType }}",
      "exchanges": [
        { "include": "{{ var.hasDlx }}", "name": "{{ var.queuePrefix }}-deadletter", "type": "fanout" }
      ],
      "queues": [ 
        { 
          "prefix": "{{ var.queuePrefix }}", 
          "scale": "{{ var.queueCount }}",
          "properties": [
            { "key": "x-queue-mode", "value": "{{ var.queueMode }}", "type": "string" }
          ],
          "dlx": {
            "hasDlx": "{{ var.hasDlx }}",
            "name": "{{ var.queuePrefix }}-deadletter"
          }
        },
        { 
          "include": "{{ var.hasDlx }}",
          "prefix": "{{ var.queuePrefix }}-deadletter", 
          "scale": 1,
          "bindings": [{ "from": "{{ var.queuePrefix }}-deadletter" }],
          "properties": [
            { "key": "x-queue-mode", "value": "{{ var.queueMode }}", "type": "string" }
          ]
        } 
      ],
      "publishers": [
        {
          "prefix": "p1",
          "scale": "{{ var.publisherCount }}",
          "publishMode": {
            "useConfirms": "{{ var.useConfirms }}",
            "inFlightLimit": "{{ var.inflightLimit }}"
          },
          "sendToQueuePrefix": {
            "queuePrefix": "{{ var.queuePrefix }}",
            "mode": "Counterpart"
          },
          "deliveryMode": "{{ var.deliveryMode }}",
          "messageSize": "{{ var.messageSize }}",
          "msgsPerSecondPerPublisher": "{{ var.publishRate }}",
          "initialPublish": "{{ var.initialPublish }}"
        }
      ],
      "consumers": [ 
        { 
          "prefix": "c1", 
          "scale": "{{ var.consumerCount }}", 
          "queuePrefix": "{{ var.queuePrefix }}",
          "ackMode": {
            "manualAcks": "{{ var.manualAcks }}",
            "consumerPrefetch": "{{ var.consumerPrefetch }}",
            "ackInterval": "{{ var.ackInterval }}",
            "ackIntervalMs": "{{ var.ackIntervalMs }}"
          },
          "processingMs": "{{ var.processingMs }}"
        },
        { 
          "include": "{{ var.hasDlx }}",
          "prefix": "c1-overflow", 
          "scale": "{{ var.consumerCount }}", 
          "queuePrefix": "{{ var.queuePrefix }}-deadletter",
          "ackMode": {
            "manualAcks": "{{ var.manualAcks }}",
            "consumerPrefetch": "{{ var.consumerPrefetch }}",
            "ackInterval": "{{ var.ackInterval }}",
            "ackIntervalMs": "{{ var.ackIntervalMs }}"
          },
          "processingMs": "{{ var.processingMs }}"
        } 
      ]
    }
  ],
  "dimensions" : {
    "singleDimension": {
        "dimension": "{{ var.dimension }}",
        "values": [
          "{{ var.value1 }}", 
          "{{ var.value2 }}", 
          "{{ var.value3 }}",
          "{{ var.value4 }}",
          "{{ var.value5 }}",
          "{{ var.value6 }}",
          "{{ var.value7 }}",
          "{{ var.value8 }}",
          "{{ var.value9 }}",
          "{{ var.value10 }}",
          "{{ var.value11 }}", 
          "{{ var.value12 }}", 
          "{{ var.value13 }}",
          "{{ var.value14 }}",
          "{{ var.value15 }}",
          "{{ var.value16 }}",
          "{{ var.value17 }}",
          "{{ var.value18 }}",
          "{{ var.value19 }}",
          "{{ var.value20 }}",
          "{{ var.value21 }}", 
          "{{ var.value22 }}", 
          "{{ var.value23 }}",
          "{{ var.value24 }}",
          "{{ var.value25 }}",
          "{{ var.value26 }}",
          "{{ var.value27 }}",
          "{{ var.value28 }}",
          "{{ var.value29 }}",
          "{{ var.value30 }}",
          "{{ var.value31 }}", 
          "{{ var.value32 }}", 
          "{{ var.value33 }}",
          "{{ var.value34 }}",
          "{{ var.value35 }}",
          "{{ var.value36 }}",
          "{{ var.value37 }}",
          "{{ var.value38 }}",
          "{{ var.value39 }}",
          "{{ var.value40 }}",
          "{{ var.value41 }}", 
          "{{ var.value42 }}", 
          "{{ var.value43 }}",
          "{{ var.value44 }}",
          "{{ var.value45 }}",
          "{{ var.value46 }}",
          "{{ var.value47 }}",
          "{{ var.value48 }}",
          "{{ var.value49 }}",
          "{{ var.value50 }}",
          "{{ var.value51 }}", 
          "{{ var.value52 }}", 
          "{{ var.value53 }}",
          "{{ var.value54 }}",
          "{{ var.value55 }}",
          "{{ var.value56 }}",
          "{{ var.value57 }}",
          "{{ var.value58 }}",
          "{{ var.value59 }}",
          "{{ var.value60 }}",
          "{{ var.value61 }}", 
          "{{ var.value62 }}", 
          "{{ var.value63 }}",
          "{{ var.value64 }}",
          "{{ var.value65 }}",
          "{{ var.value66 }}",
          "{{ var.value67 }}",
          "{{ var.value68 }}",
          "{{ var.value69 }}",
          "{{ var.value70 }}",
          "{{ var.value71 }}", 
          "{{ var.value72 }}", 
          "{{ var.value73 }}",
          "{{ var.value74 }}",
          "{{ var.value75 }}",
          "{{ var.value76 }}",
          "{{ var.value77 }}",
          "{{ var.value78 }}",
          "{{ var.value79 }}",
          "{{ var.value80 }}",
          "{{ var.value81 }}", 
          "{{ var.value82 }}", 
          "{{ var.value83 }}",
          "{{ var.value84 }}",
          "{{ var.value85 }}",
          "{{ var.value86 }}",
          "{{ var.value87 }}",
          "{{ var.value88 }}",
          "{{ var.value89 }}",
          "{{ var.value90 }}",
          "{{ var.value91 }}", 
          "{{ var.value92 }}", 
          "{{ var.value93 }}",
          "{{ var.value94 }}",
          "{{ var.value95 }}",
          "{{ var.value96 }}",
          "{{ var.value97 }}",
          "{{ var.value98 }}",
          "{{ var.value99 }}",
          "{{ var.value100 }}"
        ],
        "stepLimit": "{{ var.stepLimit }}",
        "stepDurationSeconds": "{{ var.durationSeconds }}",
        "rampUpSeconds": 1
    }
  }
}